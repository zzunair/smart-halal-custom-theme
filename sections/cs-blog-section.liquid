<link rel="stylesheet" href="{{ 'cs-blog-section.css' | asset_url }}">


<section class="cs-blogs-collections">
    <div class="custom-container">
        <h4 class="blogs-text">{{ section.settings.subheading }}</h4>
        <h2 class="section-heading" style="margin-bottom: 10px;">
            <span>{{ section.settings.heading }}</span>
        </h2>
        {% if section.settings.view_all_link != blank %}
            <a href="{{ section.settings.view_all_link }}" class="view-all-btn">
                {{ section.settings.view_all_text }}
            </a>
        {% endif %}
        <div class="slick-slider-container">
            <button class="prev-arrow slick-arrow">&#8249;</button>
            <div class="slick-slider-wrapper">
                <div class="blogs-slider slick-slider">
                    {% assign blog = section.settings.blog | default: blogs.news %}
                    {%- for article in blog.articles limit: section.settings.posts_limit -%}
                        <div class="slick-slide" style="background-color: #fff; border-radius: 8px; margin-top: 20px;">
                            <a href="{{ article.url }}" class="card">
                                <div class="card-image">
                                    <img src="{{ article.image | img_url: 'master' }}" alt="{{ article.title }}">
                                    {% if section.settings.show_tags and article.tags.size > 0 %}
                                        <p class="article-tags">
                                            {%- for tag in article.tags -%}
                                                {% assign clean_tag = tag | remove: "top-" | replace: "-", " " %}
                                                <span class="blog-tag">{{ clean_tag }}</span>{% if forloop.last == false %}, {% endif %}
                                            {%- endfor -%}
                                        </p>
                                    {% endif %}
                                </div>
                                <div class="card-info">
                                    {% if section.settings.show_date %}
                                        <p class="article-date">{{ article.published_at | date: "%-d %B, %Y" }}</p>
                                    {% endif %}
                                    <h5>{{ article.title }}</h5>
                                    {% if section.settings.show_excerpt %}
                                        <p>{{ article.excerpt | strip_html | truncate: section.settings.excerpt_length }}</p>
                                    {% endif %}
                                </div>
                            </a>
                        </div>
                    {%- endfor -%}
                </div>
            </div>
            <button class="next-arrow slick-arrow">&#8250;</button>
        </div>
    </div>
</section>


<script>
  $(document).ready(function(){
    var slickSlider = $('.blogs-slider.slick-slider');

    slickSlider.slick({
      slidesToShow: {{ section.settings.slides_to_show }}, // Number of slides from settings
      slidesToScroll: 1,
      infinite: false,
      centerMode: false,
      initialSlide: 0,
      prevArrow: $('.prev-arrow'),
      nextArrow: $('.next-arrow'),
      responsive: [
        {
          breakpoint: 768,
          settings: {
            slidesToShow: 1,
            slidesToScroll: 1
          }
        }
      ]
    });

    slickSlider.on('beforeChange', function(event, slick, currentSlide, nextSlide){
      if (nextSlide === 1) {
        $('.slick-slider-wrapper').css('padding-left', '0');
      }
    });
  });

</script>


{% schema %}
{
  "name": "Cs Blog Slider",
  "settings": [
    {
      "type": "header",
      "content": "Section Headings"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "The Journal"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Main Heading",
      "default": "Our Stories"
    },
    {
      "type": "header",
      "content": "Blog Settings"
    },
    {
      "type": "blog",
      "id": "blog",
      "label": "Select Blog"
    },
    {
      "type": "range",
      "id": "posts_limit",
      "min": 3,
      "max": 12,
      "step": 1,
      "default": 8,
      "label": "Number of Posts to Show"
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "View All Button Text",
      "default": "View All"
    },
    {
      "type": "url",
      "id": "view_all_link",
      "label": "View All Button Link"
    },
    {
      "type": "header",
      "content": "Slider Settings"
    },
    {
      "type": "range",
      "id": "slides_to_show",
      "min": 1,
      "max": 6,
      "step": 1,
      "default": 4,
      "label": "Slides to Show"
    },
    {
      "type": "checkbox",
      "id": "show_date",
      "label": "Show Post Date",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_tags",
      "label": "Show Post Tags",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_excerpt",
      "label": "Show Post Excerpt",
      "default": true
    },
    {
      "type": "range",
      "id": "excerpt_length",
      "min": 50,
      "max": 300,
      "step": 10,
      "default": 100,
      "label": "Excerpt Length"
    }
  ],
  "presets": [
    {
      "name": "Cs Blog Slider",
      "settings": {}
    }
  ]
}
{% endschema %}